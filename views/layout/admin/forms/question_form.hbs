

<form class="form-horizontal" id="form" method="POST" action="/course/{{CourseId}}/addquestion">
  <div class="form-group">
    <label class="control-label col-sm-2" for="email">Question:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" name="Title" id="email" placeholder="Enter Question">
    </div>
  </div>
  <div class="form-group">
    <label class="control-label col-sm-2" for="pwd">Options:</label>
    <div class="col-sm-10">
    <div class="col-sm-8">
      <input type="text" class="form-control" name="Options[0][Title]" id="pwd" placeholder="Enter First Option">
   </div>
      <input type="checkbox" class=" option"  name="Options[0][IsCorrect]" value="true">
   </div>

    <input type="text" name="ImageUrl" id="ImageUrl" hidden="true" >

   <div class="col-sm-10">
    <div class="col-sm-8">
      <input type="text" class="form-control" name="Options[1][Title]" id="pwd" placeholder="Enter Second Option">
   </div>
      <input type="checkbox" class=" option"  name="Options[1][IsCorrect]" value="true">
   </div>

   <div class="col-sm-10">
    <div class="col-sm-8">
      <input type="text" class="form-control" name="Options[2][Title]" id="pwd" placeholder="Enter Third Option">
   </div>
      <input type="checkbox" class=" option"  name="Options[2][IsCorrect]" value="true">
   </div>


    <div class="col-sm-10">
    <div class="col-sm-8">
      <input type="text" class="form-control" name="Options[3][Title]" id="pwd" placeholder="Enter Fourth Option">
   </div>
      <input type="checkbox" class=" option" name="Options[3][IsCorrect]" value="true">
   </div>
  </div>



  <div class="col-sm-10">
  <label class="control-label col-sm-2" for="image">Add Image </label>
  <div class="col-sm-8">
    <input type="file" id="file" class="form-control" placeholder="Add Image">
  </div>
   </div>
  </div>

  

  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn btn-primary">Create</button>
    </div>
  </div>
</form>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
$(".option").change(function() {
    $(".option").prop('checked', false);
    $(this).prop('checked', true);
});


$(".option").change(function() {
    $(".option").not(this).prop('checked', false);
});

</script>
<script src="/lodash/lodash.js" type="text/javascript"></script>
<script src="/cloudinary-core/cloudinary-core.js" type="text/javascript"></script>
<script>


var cloudName = "indexter12"
function UploadFile(){
 var file = document.getElementById("file").files[0] 
  var formData = new FormData()
      formData.append("file", file);
      formData.append("upload_preset", "ml_default");
      formData.append("unsigned", "true");

      fetch(`https://api.cloudinary.com/v1_1/${cloudName}/upload`, {
              method: 'POST',
              body: formData
              }).then(response => {
        if(response.ok){
             response.json().then((data)=>
            {
              document.getElementById("ImageUrl").value = data.url  
              document.getElementById("form").submit()                                                                                         
            })                                  
        }else{
              response.json().then((data)=>
            {
              swal({
                    text: "Some thing went wrong! Maybe Internet?"
                  });                                                                                                
            })                                           
        }
    })    
}


 document.getElementById("form").onsubmit = async (e) => {
    e.preventDefault();
    UploadFile()
  }
</script>   

